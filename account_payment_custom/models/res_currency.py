import loggingfrom odoo import fields, models, api, _from odoo import tools_logger = logging.getLogger(__name__)try:    from num2words import num2wordsexcept ImportError:    _logger.warning("The num2words python library is not installed, amount-to-text features won't be fully available.")    num2words = Noneclass ResCurrency(models.Model):    _inherit = 'res.currency'    def amount_to_text(self, amount):        self.ensure_one()        if self.name != 'QAR':            return super().amount_to_text(amount)        def _num2words(number, lang):            try:                return num2words(number, lang=lang).title()            except NotImplementedError:                return num2words(number, lang='en').title()        if num2words is None:            logging.getLogger(__name__).warning("The library 'num2words' is missing, cannot render textual amounts.")            return ""        formatted = "%.{0}f".format(self.decimal_places) % amount        parts = formatted.partition('.')        integer_value = int(parts[0])        fractional_value = int(parts[2] or 0)        lang_code = self.env.context.get('lang') or self.env.user.lang        lang = self.env['res.lang'].with_context(active_test=False).search([('code', '=', lang_code)])        if lang_code in ['ar_001', 'ar_SY']:            amount_words = tools.ustr('{amt_value} {amt_word}').format(                amt_value=_num2words(integer_value, lang=lang.iso_code),                amt_word='ريال',            )            if not self.is_zero(amount - integer_value):                amount_words += ' ' + _('and') + tools.ustr(' {amt_value} {amt_word}').format(                    amt_value=_num2words(fractional_value, lang=lang.iso_code),                    amt_word='درهم',                )        elif lang_code in ['en_US']:            amount_words = tools.ustr('{amt_value} {amt_word}').format(                amt_value=_num2words(integer_value, lang=lang.iso_code),                amt_word='Qatari Riyals',            )            if not self.is_zero(amount - integer_value):                amount_words += ' ' + _('and') + tools.ustr(' {amt_value} {amt_word}').format(                    amt_value=_num2words(fractional_value, lang=lang.iso_code),                    amt_word='Dirham',                )            amount_words += ' Only'        else:            amount_words = tools.ustr('{amt_value} {amt_word}').format(                amt_value=_num2words(integer_value, lang=lang.iso_code),                amt_word=self.currency_unit_label,            )            if not self.is_zero(amount - integer_value):                amount_words += ' ' + _('and') + tools.ustr(' {amt_value} {amt_word}').format(                    amt_value=_num2words(fractional_value, lang=lang.iso_code),                    amt_word=self.currency_subunit_label,                )        amount_words = amount_words.replace("عشرين", "عشرون")        amount_words = amount_words.replace("ثلاثين", "ثلاثون")        amount_words = amount_words.replace("أربعين", "أربعون")        amount_words = amount_words.replace("خمسين", "خمسون")        amount_words = amount_words.replace("ستين", "ستون")        amount_words = amount_words.replace("سبعين", "سبعون")        amount_words = amount_words.replace("ثمانين", "ثمانون")        amount_words = amount_words.replace("تسعين", "تسعون")        amount_words = amount_words.replace("مئة", "مائة")        amount_words = amount_words.replace("مئتين", "مائتان")        amount_words = amount_words.replace("ثلاثة مائة", "ثلاثمائة")        amount_words = amount_words.replace("أربعة مائة", "أربعمائة")        amount_words = amount_words.replace("خمسة مائة", "خمسمائة")        amount_words = amount_words.replace("ستة مائة", "ستمائة")        amount_words = amount_words.replace("سبعة مائة", "سبعمائة")        amount_words = amount_words.replace("ثمانية مائة", "ثمانمائة")        amount_words = amount_words.replace("تسعة مائة", "تسعمائة")        amount_words = amount_words.replace('،', " و ")        amount_words = amount_words.replace(',', " And")        amount_words = amount_words.replace("واحد مليون", "مليون")        amount_words = amount_words.replace("اثنين مليون", "مليونان")        amount_words = amount_words.replace("ثلاثة مليون", "ثلاثة ملايين")        amount_words = amount_words.replace("أربعة مليون", "أربعة ملايين")        amount_words = amount_words.replace("خمسة مليون", "خمسة ملايين")        amount_words = amount_words.replace("ستة مليون", "ستة ملايين")        amount_words = amount_words.replace("سبعة مليون", "سبعة ملايين")        amount_words = amount_words.replace("ثمانية مليون", "ثمانيه ملايين")        amount_words = amount_words.replace("تسعة مليون", "تسعة ملايين")        amount_words = amount_words.replace("عشرة مليون", "عشرة ملايين")        amount_words = amount_words.replace("Billion", "مليار")        return amount_words
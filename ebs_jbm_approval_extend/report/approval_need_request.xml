<odoo>    <template id="need_request_report_document">        <t t-call="web.basic_layout">            <div class="page" style="direction: rtl;">                <html>                    <style type="text/css">                        @font-face {                        font-family: 'Parastoo-normal';                        src: local('Parastoo'), local('Parastoo'),                        url(/ebs_jbm_approval_extend/static/src/font/Parastoo Print Regular.ttf) format('truetype');                        }                        @font-face {                        font-family: 'Parastoo-Bold';                        src: local('Parastoo'), local('Parastoo'),                        url(/ebs_jbm_approval_extend/static/src/font/Parastoo-Bold.ttf) format('truetype');                        }                        .Bold {                        font-family: Parastoo-Bold;                        }                        body{                        font-family: 'Parastoo-normal', serif !important;                        font-size:14px!important;                        }                        .table                        {                        margin-bottom:0px;                        border-collapse: collapse;                        border-spacing: 0;                        }                        <!--                        .table tr-->                        <!--                        {-->                        <!--                        line-height:5px!important;-->                        <!--                        }-->                        td{                        border-right: 1px solid #c8bca8!important;                        border-left: 1px solid #c8bca8!important;                        border-bottom: 1px solid #c8bca8!important;                        padding:2px!important;                        }                        .custom_td{                        text-align: right!important;                        vertical-align: middle;                        padding:2px!important;                        }                        .custom_input{                        width:20px;                        height:20px;                        }                    </style>                    <body DIR="RTL">                        <div class="header" style="text-align:center;">                            <img t-if="o.company_id.company_report_header"                                 t-att-src="image_data_uri(o.company_id.company_report_header)"                                 style="padding-left:5px;height:147px;width:100%;" alt="Logo"/>                        </div>                        <h3 style="text-align:center!important;color:#5e0b05;" class="Bold">                            نموذج طلب احتياج                        </h3>                        <table class="table" style="border: 1px solid #c8bca8!important;">                            <tr style="background-color: #806941!important;">                                <td colspan="2" style="color: white;text-align: center;" class="Bold">                                    بيانات طلب الاحتياج                                </td>                            </tr>                            <tr style="background-color: #f2efe9!important;">                                <td width="66.6%" class="custom_td">                                    <t t-if="o.approval_product_type == 'consumable_storable'">                                        <input type="checkbox" class="custom_input" checked="checked"/>                                    </t>                                    <t t-if="o.approval_product_type != 'consumable_storable'">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                    <span style="padding-left:25px;">شراء</span>                                    <t t-if="o.approval_product_type == 'service'">                                        <input type="checkbox" class="custom_input" checked="checked"/>                                    </t>                                    <t t-if="o.approval_product_type != 'service'">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                    <span style="padding-left:20px;">تنفيذ خدمة / اعمال</span>                                    <t t-if="o.approval_product_type == 'consumable_storable_service'">                                        <input type="checkbox" class="custom_input" checked="checked"/>                                    </t>                                    <t t-if="o.approval_product_type != 'consumable_storable_service'">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                    <span>شراء / تنفيذ خدمة / أعمال</span>                                </td>                                <td width="33.4%" class="custom_td">                                    <input type="checkbox" class="custom_input" checked="checked"/>                                    <span style="padding-left:30px;">عادى</span>                                    <input type="checkbox" class="custom_input"/>                                    <span>عاجل</span>                                </td>                            </tr>                            <tr style="background-color: #f2efe9!important;">                                <td width="66.6%" class="custom_td">                                    <span>آلإدارة :</span>                                    <t t-esc="o.request_owner_id.employee_id.department_id.name"/>                                </td>                                <td width="33.4%" class="custom_td">                                    <span>رقم الطلب:</span>                                    <t t-esc="o.name"/>                                </td>                            </tr>                            <tr style="background-color: #f2efe9!important;">                                <td width="66.6%" class="custom_td">                                    <span>اسم مقدم الطلب :</span>                                    <t t-esc="o.request_owner_id.name"/>                                </td>                                <td width="33.4%" class="custom_td">                                    <span>التاريخ:</span>                                    <t t-esc="o.create_date.date().strftime('%d/%m/%Y')"/>                                </td>                            </tr>                        </table>                        <table class="table" style="border: 1px solid #c8bca8!important;">                            <tr style="background-color: #806941!important;">                                <td style="color: white;text-align: center;" class="Bold" width="2%">                                    م                                </td>                                <td style="color: white;text-align: center;" class="Bold" width="50%">                                    البيان / المواصفات                                </td>                                <td style="color: white;text-align: center;" class="Bold" width="19%">                                    الوحدة                                </td>                                <td style="color: white;text-align: center;" class="Bold" width="19%">                                    الكمية                                </td>                            </tr>                            <t t-set="sr_number" t-value="0"/>                            <tr t-foreach="o.product_line_ids.filtered(lambda line: not line.is_available)" t-as="line"                                style="background-color: #f2efe9!important;">                                <t t-set="sr_number" t-value="sr_number +1"/>                                <td width="2%" class="custom_td">                                    <span t-esc="sr_number"/>                                </td>                                <td width="50%" class="custom_td">                                    <span t-esc="line.product_id.name"/>                                </td>                                <td width="19%" class="custom_td">                                    <span t-esc="line.product_uom_id.name"/>                                </td>                                <td width="19%" class="custom_td">                                    <span t-esc="line.quantity"/>                                </td>                            </tr>                        </table>                        <table class="table" style="border: 1px solid #c8bca8!important;">                            <tr style="background-color: #806941!important;">                                <td style="color: white;text-align: center;" class="Bold" width="50%">                                    القيمة التقديرية                                </td>                                <td style="color: white;text-align: center;" class="Bold" width="50%">                                    القيمة الفعلية                                </td>                            </tr>                            <tr style="background-color: #f2efe9!important;">                                <td width="50%" class="custom_td">                                    <span t-field="o.amount"/>                                </td>                                <td width="50%" class="custom_td">                                    <span t-esc="'{0:,.0f}'.format(o.purchases_total_amount)"/>                                </td>                            </tr>                        </table>                        <table class="table" style="border: 1px solid #c8bca8!important;">                            <tr style="background-color: #806941!important;">                                <td style="color: white;text-align: center;" class="Bold" width="50%">                                    الغرض من الشراء                                </td>                                <td style="color: white;text-align: center;" class="Bold" width="50%">                                    الشركات المقترحة                                </td>                            </tr>                            <t t-set="is_justification_print" t-value="False"/>                            <t t-foreach="o.product_line_ids.filtered(lambda line: not line.is_available)" t-as="line">                                <t t-if="len(line.product_id.seller_ids) > 1">                                    <t t-foreach="line.product_id.seller_ids" t-as="seller">                                        <tr style="background-color: #f2efe9!important;">                                            <td width="50%" class="custom_td" style="border-style: hidden;">                                                <!--                                                <span t-field="line.product_id.name"/>-->                                                <t t-if="not is_justification_print">                                                    <span t-esc="o.reason"/>                                                    <t t-set="is_justification_print" t-value="True"/>                                                </t>                                            </td>                                            <td width="50%" class="custom_td">                                                <span t-field="seller.name.name"/>                                            </td>                                        </tr>                                    </t>                                </t>                                <t t-if="len(line.product_id.seller_ids) == 1">                                    <tr style="background-color: #f2efe9!important;">                                        <td width="50%" class="custom_td" style="border-style: hidden;">                                            <!--                                            <span t-field="line.product_id.name"/>-->                                            <t t-if="not is_justification_print">                                                <span t-esc="o.reason"/>                                                <t t-set="is_justification_print" t-value="True"/>                                            </t>                                        </td>                                        <td width="50%" class="custom_td">                                            <span t-field="line.product_id.seller_ids.name.name"/>                                        </td>                                    </tr>                                </t>                                <t t-if="not line.product_id.seller_ids">                                    <tr style="background-color: #f2efe9!important;">                                        <td width="50%" class="custom_td" style="border-style: hidden;">                                            <!--                                            <span t-field="line.product_id.name"/>-->                                            <t t-if="not is_justification_print">                                                <span t-esc="o.reason"/>                                                <t t-set="is_justification_print" t-value="True"/>                                            </t>                                        </td>                                        <td width="50%" class="custom_td" style="border-style: hidden;">                                        </td>                                    </tr>                                </t>                            </t>                            <tr style="background-color: #f2efe9!important;">                                <td width="100%" colspan="2" class="custom_td">                                    <span style="padding-left:25px;">المرفقات</span>                                    <t t-if="o.attachment_number">                                        <input type="checkbox" class="custom_input" checked="checked"/>                                    </t>                                    <t t-if="not o.attachment_number">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                </td>                            </tr>                        </table>                        <table class="table" style="border: 1px solid #c8bca8!important; padding-bottom:10px;">                            <tr style="background-color: #806941!important;">                                <td colspan="2" style="color: white;text-align: center;" class="Bold">                                    مسؤول الجهة الطالبة                                </td>                            </tr>                            <tr style="background-color: #f2efe9!important;">                                <td width="50%" class="custom_td">                                    <sapn>التوقيع :</sapn>                                    <t t-if="o.get_request_responsible()">                                        <span t-esc="o.get_request_responsible()[0]"/>                                        <!--                                        <img t-att-src="'data:image/png;base64,%s' % to_text(o.get_request_responsible()[0])"-->                                        <!--                                                 style="height: 25px;width: 50px;"/>-->                                    </t>                                </td>                                <td width="50%" class="custom_td">                                    <sapn>التاريخ :</sapn>                                    <t t-if="o.get_request_responsible()">                                        <t t-if="len(o.get_request_responsible()) > 1">                                            <span t-esc="o.get_request_responsible()[1]"/>                                        </t>                                    </t>                                </td>                            </tr>                        </table>                        <table class="table" style="border: 1px solid #c8bca8!important;">                            <tr style="background-color: #806941!important;">                                <td colspan="4" style="color: white;text-align: center;" class="Bold">                                    موازنة الجهة الطالبة وتوصية الؤون المالية                                </td>                            </tr>                            <tr>                                <td width="30%" class="custom_td" style="background-color: #e5ded4!important;">                                    <sapn>اسم بند الموازنة</sapn>                                </td>                                <td width="20%" class="custom_td" style="background-color: #f2efe9!important;">                                    <t t-if="o.get_budget_amounts()">                                        <t t-if="o.get_budget_amounts()[0]">                                            <span t-esc="o.get_budget_amounts()[0].general_budget_id.name"/>                                        </t>                                    </t>                                </td>                                <td width="30%" class="custom_td" style="background-color: #e5ded4!important;">                                    <sapn>المنصرف الفعلي</sapn>                                </td>                                <td width="20%" class="custom_td" style="background-color: #f2efe9!important;">                                    <t t-if="o.get_budget_amounts()">                                        <!--                                        <span t-esc="o.get_budget_amounts()[0].practical_amount"/>-->                                        <span t-esc="'{0:,.0f}'.format(o.get_budget_amounts()[0].practical_amount)"/>                                    </t>                                </td>                            </tr>                            <tr>                                <td width="30%" class="custom_td" style="background-color: #e5ded4!important;">                                    <sapn>رقم بند الموازنة</sapn>                                </td>                                <td width="20%" class="custom_td" style="background-color: #f2efe9!important;">                                    <t t-if="o.get_budget_amounts()">                                        <t t-if="o.get_budget_amounts()[0]">                                            <span t-esc="o.get_budget_amounts()[0].general_budget_id.budget_position_number"/>                                        </t>                                    </t>                                </td>                                <td width="30%" class="custom_td" style="background-color: #e5ded4!important;">                                    <sapn>التزامات قيد ألأجراء</sapn>                                </td>                                <td width="20%" class="custom_td" style="background-color: #f2efe9!important;">                                    <t t-if="o.get_budget_amounts()">                                        <!--                                        <span t-esc="o.get_budget_amounts()[0].amount_of_reservation"/>-->                                        <span t-esc="'{0:,.0f}'.format(o.get_budget_amounts()[0].amount_of_reservation)"/>                                    </t>                                </td>                            </tr>                            <tr>                                <td width="30%" class="custom_td" style="background-color: #e5ded4!important;">                                    <sapn>أجمالي الموازنة المعتمدة للادارة</sapn>                                </td>                                <td width="20%" class="custom_td" style="background-color: #f2efe9!important;">                                    <t t-if="o.get_budget_amounts()">                                        <!--                                        <span t-esc="o.get_budget_amounts()[0].planned_amount"/>-->                                        <span t-esc="'{0:,.0f}'.format(o.get_budget_amounts()[0].planned_amount)"/>                                    </t>                                </td>                                <td width="30%" class="custom_td" style="background-color: #e5ded4!important;">                                    <sapn>أجمالي المصروفات الفعلية والالتزامات</sapn>                                </td>                                <td width="20%" class="custom_td" style="background-color: #f2efe9!important;">                                    <t t-if="o.get_budget_amounts()">                                        <t t-set="total_expenses"                                           t-value="o.get_budget_amounts()[0].amount_of_reservation + o.get_budget_amounts()[0].practical_amount"/>                                        <span t-esc="'{0:,.0f}'.format(total_expenses)"/>                                    </t>                                </td>                            </tr>                            <tr>                                <td width="30%" class="custom_td" style="background-color: #e5ded4!important;">                                    <sapn>الموازنة المتاحة</sapn>                                </td>                                <td width="20%" class="custom_td" style="background-color: #f2efe9!important;">                                    <t t-if="o.get_budget_amounts()">                                        <t t-set="total_expenses"                                           t-value="o.get_budget_amounts()[0].amount_of_reservation + o.get_budget_amounts()[0].practical_amount"/>                                        <t t-set="available_amount"                                           t-value="o.get_budget_amounts()[0].planned_amount - total_expenses"/>                                        <span t-esc="'{0:,.0f}'.format(available_amount)"/>                                    </t>                                </td>                                <td width="50%" class="custom_td" style="background-color: #f2efe9!important;"                                    colspan="2">                                    <t t-if="o.get_budget_amounts()">                                        <t t-set="total_expenses"                                           t-value="o.get_budget_amounts()[0].amount_of_reservation + o.get_budget_amounts()[0].practical_amount"/>                                        <t t-set="available_amount"                                           t-value="o.get_budget_amounts()[0].planned_amount - total_expenses"/>                                        <t t-if="o.amount &lt;= available_amount">                                            <input type="checkbox" class="custom_input" checked="checked"/>                                        </t>                                        <t t-if="o.amount &gt; available_amount">                                            <input type="checkbox" class="custom_input"/>                                        </t>                                    </t>                                    <t t-else="">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                    <span style="padding-left:30px;">البند يسمح</span>                                    <t t-if="o.get_budget_amounts()">                                        <t t-set="total_expenses"                                           t-value="o.get_budget_amounts()[0].amount_of_reservation + o.get_budget_amounts()[0].practical_amount"/>                                        <t t-set="available_amount"                                           t-value="o.get_budget_amounts()[0].planned_amount - total_expenses"/>                                        <t t-if="o.amount &lt;= available_amount">                                            <input type="checkbox" class="custom_input"/>                                        </t>                                        <t t-if="o.amount &gt; available_amount">                                            <input type="checkbox" class="custom_input" checked="checked"/>                                        </t>                                    </t>                                    <t t-else="">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                    <span>البند لا يسمح</span>                                </td>                            </tr>                        </table>                        <table class="table" style="border: 1px solid #c8bca8!important; padding-bottom:10px;">                            <tr style="background-color: #806941!important;">                                <td colspan="2" style="color: white;text-align: center;" class="Bold">                                    مسؤول الشؤون المالية                                </td>                            </tr>                            <tr style="background-color: #f2efe9!important;">                                <td width="50%" class="custom_td">                                    <sapn>التوقيع :</sapn>                                    <t t-if="o.get_accounting_manager()">                                        <!--                                        <img t-att-src="'data:image/png;base64,%s' % to_text(o.get_accounting_manager().)"-->                                        <!--                                             style="width: 50px;"/>-->                                        <span t-esc="o.get_accounting_manager()[0]"/>                                    </t>                                </td>                                <td width="50%" class="custom_td">                                    <sapn>التاريخ :</sapn>                                    <t t-if="o.get_accounting_manager()">                                         <t t-if="len(o.get_accounting_manager()) > 1">                                            <span t-esc="o.get_accounting_manager()[1]"/>                                         </t>                                    </t>                                </td>                            </tr>                        </table>                        <table class="table" style="border: 1px solid #c8bca8!important; padding-bottom:10px;">                            <tr style="background-color: #806941!important;">                                <td colspan="5" style="color: white;text-align: center;" class="Bold" width="100%">                                    الاعتماد                                </td>                            </tr>                            <tr style="background-color: #f2efe9!important;">                                <td width="2%" class="custom_td" rowspan="2"                                    style="background-color: #f2efe9!important;border-left:none!important; border-bottom:none!important;">                                    <t t-if="o.get_budget_amounts()">                                        <t t-set="total_expenses"                                           t-value="o.get_budget_amounts()[0].amount_of_reservation + o.get_budget_amounts()[0].practical_amount"/>                                        <t t-set="available_amount"                                           t-value="o.get_budget_amounts()[0].planned_amount - total_expenses"/>                                        <t t-if="o.amount &lt;= available_amount">                                            <input type="checkbox" class="custom_input" checked="checked"/>                                        </t>                                        <t t-if="o.amount &gt; available_amount">                                            <input type="checkbox" class="custom_input"/>                                        </t>                                    </t>                                    <t t-else="">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                </td>                                <td width="23%" class="custom_td" rowspan="2"                                    style="background-color: #f2efe9!important;border-left:none!important; border-right:none!important; border-bottom:none!important;">                                    <span style="padding-left:30px;">لا مانع ويحال الطلب</span>                                    <br/>                                    <br/>                                    <br/>                                    <br/>                                    <span style="padding-left:30px;">للجهة المختصة للتنفيذ</span>                                </td>                                <td width="2%" class="custom_td"                                    style="background-color: #f2efe9!important;border-left:none!important; border-right:none!important; border-bottom:none!important;">                                    <!--                                    <input type="checkbox" class="custom_input"/>-->                                    <t t-if="o._get_purchase_order()">                                        <t t-if="o._get_purchase_order().state =='purchase' and o._get_purchase_order().employee_ids">                                            -                                            <input type="checkbox" class="custom_input"/>                                        </t>                                        <t t-else="">                                            <input type="checkbox" class="custom_input" checked="checked"/>                                        </t>                                    </t>                                    <t t-else="">                                        <input type="checkbox" class="custom_input" checked="checked"/>                                    </t>                                </td>                                <td width="23%" class="custom_td"                                    style="background-color: #f2efe9!important; border-right:none!important; border-bottom:none!important;">                                    <span>قسم المشتريات</span>                                </td>                                <td width="30%" class="custom_td" rowspan="3">                                    <t t-if="o.request_status == 'refused'">                                        <input type="checkbox" class="custom_input" checked="checked"/>                                    </t>                                    <t t-if="o.request_status != 'refused'">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                    <span>تم رفض الطلب</span>                                </td>                            </tr>                            <tr>                                <td width="2%" class="custom_td"                                    style="background-color: #f2efe9!important;border-left:none!important; border-right:none!important; border-bottom:none!important;">                                    <!--                                    <t t-if="o.request_status == 'approved'">-->                                    <t t-if="o._get_purchase_order()">                                        <t t-if="o._get_purchase_order().state =='purchase' and o._get_purchase_order().employee_ids">                                            -                                            <input type="checkbox" class="custom_input" checked="checked"/>                                        </t>                                        <t t-else="">                                            <input type="checkbox" class="custom_input"/>                                        </t>                                    </t>                                    <t t-else="">                                        <input type="checkbox" class="custom_input"/>                                    </t>                                </td>                                <td width="23%" class="custom_td"                                    style="background-color: #f2efe9!important; border-right:none!important; border-bottom:none!important;">                                    <span>لجنة المشتريات</span>                                </td>                            </tr>                            <tr>                                <td width="70%" class="custom_td" colspan="4"                                    style="background-color: #f2efe9!important;">                                    <span>الاعتماد:</span>                                    <span style="padding:20px;">                                        <t t-if="o.get_last_approver()">                                            <!--                                            <img t-att-src="'data:image/png;base64,%s' % to_text(o.approver_ids[-1].signature)"-->                                            <!--                                                 style="width: 50px;"/>-->                                            <span t-esc="o.get_last_approver()[0]"/>                                        </t>                                    </span>                                    <span>التاريخ:</span>                                    <t t-if="o.get_last_approver()">                                        <t t-if="len(o.get_last_approver()) > 1">                                            <span t-esc="o.get_last_approver()[1]"/>                                        </t>                                    </t>                                </td>                            </tr>                        </table>                        <div class="footer">                            <img src="/ebs_jbm_approval_extend/static/src/img/approval_need_footer.jpg"                                 style="height:130px;width:100%;"/>                        </div>                    </body>                </html>            </div>            <div class="row footer">                <table DIR="LTR">                    <tr>                        <td>                            <span t-esc="total_page" style="font-size:10px!important;"/>                        </td>                        <td>                            <span style="padding-left:4px;">من</span>                        </td>                        <td>                            <span t-esc="page_number"                                  style="padding-left:4px;font-size:10px!important;"/>                        </td>                    </tr>                </table>            </div>        </t>    </template>    <template id="need_request_report_template">        <t t-call="web.html_container">            <t t-set="total_page" t-value="len(docs)"/>            <t t-set="page_number" t-value="0"/>            <t t-foreach="docs" t-as="o">                <t t-set="o" t-value="o.sudo()"/>                <t t-set="page_number" t-value="page_number + 1"/>                <t t-call="ebs_jbm_approval_extend.need_request_report_document"/>            </t>        </t>    </template>    <record id="need_request_report_action" model="ir.actions.report">        <field name="name">طلب احتياج</field>        <field name="model">approval.request</field>        <field name="report_type">qweb-pdf</field>        <field name="report_name">ebs_jbm_approval_extend.need_request_report_template</field>        <field name="report_file">ebs_jbm_approval_extend.need_request_report_template</field>        <!--        <field name="binding_model_id" ref="approvals.model_approval_request"/>-->        <field name="binding_model_id" eval="False"/>        <field name="binding_type">report</field>    </record></odoo>
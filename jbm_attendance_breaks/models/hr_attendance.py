# -*- coding: utf-8 -*-from odoo import api, fields, modelsfrom datetime import timedeltaclass HRAttendance(models.Model):    _inherit = 'hr.attendance'    @api.model_create_multi    def create(self, vals_list):        attendance_records = super(HRAttendance, self).create(vals_list)        employees = attendance_records.mapped('employee_id')        employee_attendance_days = [attendance.check_in.date() for attendance in attendance_records]        unique_attendance_days = list(set(employee_attendance_days))        unique_attendance_days.sort()        self.env['hr.attendance.sheet']._set_breaks(employees, unique_attendance_days)        return attendance_records    def write(self, vals):        if any(field in vals for field in ['employee_id', 'check_in', 'check_out']):            employees = self.mapped('employee_id')            employee_attendance_days = [attendance.check_in.date() for attendance in self]            unique_attendance_days = list(set(employee_attendance_days))            unique_attendance_days.sort()            self.env['hr.attendance.sheet']._set_breaks(employees, unique_attendance_days)        return super(HRAttendance, self).write(vals)    def unlink(self):        employees = self.mapped('employee_id')        employee_attendance_days = [attendance.check_in.date() for attendance in self]        unique_attendance_days = list(set(employee_attendance_days))        unique_attendance_days.sort()        res = super(HRAttendance, self).unlink()        if unique_attendance_days:            self.env['hr.attendance.sheet']._set_breaks(employees, unique_attendance_days)        return res    @api.constrains('break_time', 'early_check_out', 'late_check_in')    def delete_empty_records(self):        empty_records = self.filtered(lambda justification: \                                          justification.break_time >= 0 and justification.early_check_out >= 0 \                                          and justification.late_check_in >= 0)        empty_records.unlink()